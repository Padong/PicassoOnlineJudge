<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>iframe embed page</title>

<!-- dependencies for pytutor.js -->
<script type="text/javascript" src="js/d3.v2.min.js"></script>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/jquery.ba-bbq.min.js"></script> <!-- for handling back button and URL hashes -->
<script type="text/javascript" src="js/jquery.ba-dotimeout.min.js"></script> <!-- for event debouncing -->
<script type="text/javascript" src="js/jquery.jsPlumb-1.3.10-all-min.js "></script> <!-- for rendering SVG connectors 
                                                                                         DO NOT UPGRADE ABOVE 1.3.10 OR ELSE BREAKAGE WILL OCCUR -->
<script type="text/javascript" src="js/diff_match_patch.js"></script>

<script type="text/javascript" src="js/jquery-ui-1.11.4/jquery-ui.min.js"></script> <!-- for sliders and other UI elements -->
<link type="text/css" href="js/jquery-ui-1.11.4/jquery-ui.css" rel="stylesheet" />

<!-- Python Tutor frontend code and styles -->
<script type="text/javascript" src="js/pytutor.js"></script>
<link rel="stylesheet" href="css/pytutor.css"/>

<script type="text/javascript" src="js/opt-frontend-common.js"></script>
<script type="text/javascript" src="js/iframe-embed.js"></script>
<script type="text/javascript">
/*
function onReady(myVisualizer){
	console.log(myVisualizer);
	myVisualizer.add_pytutor_hook(
		"end_renderDataStructures",
		function(args) {
			console.log("end_renderDataStructures");
			var myViz = args.obj; // unpack
			innerFrameArrange(myViz);
			return [false]; // didn't handle it, let someone else
		}
	);
}
*/
// myViz.domRoot
function innerFrameArrange(){
	$(myVisualizer.domRoot.find('.stackFrame').get().reverse()).each(function(idx, aFrame){
		aFrame = $(aFrame);
		if (!aFrame.attr('data-parent_frame_id'))
			return;
		var parentFrame = myVisualizer.domRoot.find('div [data-frame_id=' + aFrame.attr('data-parent_frame_id') + ']');
		if (!parentFrame)
			return;
		parentFrame.append(aFrame.remove());
	});
}
$(document).ready(function(){
	var iInterval = setInterval(function(){innerFrameArrange()}, 100);
});

</script>
</head>

<body>

  <div id="vizDiv"></div>

</body>
</html>
